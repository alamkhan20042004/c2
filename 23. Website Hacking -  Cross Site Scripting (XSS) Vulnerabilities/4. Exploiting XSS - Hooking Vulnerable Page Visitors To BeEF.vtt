WEBVTT

1
00:00:01.510 --> 00:00:02.343
<v ->Okay.</v>

2
00:00:02.343 --> 00:00:05.910
So now we know how to discover XSS vulnerabilities.

3
00:00:05.910 --> 00:00:09.020
We haven't seen a good way of exploiting it, though.

4
00:00:09.020 --> 00:00:12.110
All we were doing is injecting a very simple code,

5
00:00:12.110 --> 00:00:15.587
that just displays an alert on screen saying that,

6
00:00:15.587 --> 00:00:17.500
"This website is vulnerable".

7
00:00:17.500 --> 00:00:19.010
What I want to do now is,

8
00:00:19.010 --> 00:00:20.960
I want to do something more advanced.

9
00:00:20.960 --> 00:00:23.150
I want to be able to control the victims,

10
00:00:23.150 --> 00:00:25.500
and do stuff on the target computers,

11
00:00:25.500 --> 00:00:28.420
on the people that visit the vulnerable pages

12
00:00:28.420 --> 00:00:30.083
where we inject our code.

13
00:00:32.230 --> 00:00:35.040
We're going to use Beef to do this.

14
00:00:35.040 --> 00:00:36.780
We haven't looked on Beef before.

15
00:00:36.780 --> 00:00:38.260
And, what we're going to do is,

16
00:00:38.260 --> 00:00:40.590
we're gonna use the Beef hook URL.

17
00:00:40.590 --> 00:00:44.290
And, we're gonna inject it into the stored XSS page.

18
00:00:44.290 --> 00:00:47.360
So that everybody who visits that page,

19
00:00:47.360 --> 00:00:48.930
will be hooked to Beef.

20
00:00:48.930 --> 00:00:51.400
And then, we'll be able to run all the commands

21
00:00:51.400 --> 00:00:54.253
that Beef allows us to on the target computer.

22
00:00:57.250 --> 00:00:58.750
So, I'm gonna start Beef here.

23
00:01:02.170 --> 00:01:04.920
Now, as you can see, logged into the main screen,

24
00:01:04.920 --> 00:01:06.053
very simple screen.

25
00:01:07.600 --> 00:01:09.550
And, if we look at the online browsers,

26
00:01:09.550 --> 00:01:11.403
we have no victims at the moment.

27
00:01:13.300 --> 00:01:16.120
So, in order to hook victims to this framework,

28
00:01:16.120 --> 00:01:20.910
and gain access to the functionality of Beef,

29
00:01:20.910 --> 00:01:23.960
you need to inject this particular script

30
00:01:23.960 --> 00:01:24.910
and set up the alert.

31
00:01:24.910 --> 00:01:26.620
So, remember the way we were injecting

32
00:01:26.620 --> 00:01:28.680
an alert script into the URL?

33
00:01:28.680 --> 00:01:29.960
Or into the page?

34
00:01:29.960 --> 00:01:33.180
We're gonna be injecting a script that does the following.

35
00:01:33.180 --> 00:01:35.070
So, that contains the following.

36
00:01:35.070 --> 00:01:36.383
So, I'm gonna copy this.

37
00:01:37.920 --> 00:01:40.320
And then, I'm gonna go to my vulnerable website.

38
00:01:41.910 --> 00:01:44.290
Remember, this could be a popular website,

39
00:01:44.290 --> 00:01:47.473
or website of a company which you're doing a pen test for.

40
00:01:48.760 --> 00:01:52.023
I'm just gonna make sure the security is set to low.

41
00:01:56.300 --> 00:01:59.763
And, I'm actually gonna use the stored XSS.

42
00:02:02.690 --> 00:02:06.140
And, I'm going to put the name as

43
00:02:06.140 --> 00:02:06.973
Beef.

44
00:02:08.120 --> 00:02:10.970
And, we'll put the comment as the hook

45
00:02:10.970 --> 00:02:14.200
that we got from the terminal.

46
00:02:14.200 --> 00:02:17.363
And, I'm gonna modify the IP here, to my own IP address.

47
00:02:19.380 --> 00:02:21.990
So, instead of just IP I'm gonna put my IP address,

48
00:02:21.990 --> 00:02:22.903
which is "10.

49
00:02:23.880 --> 00:02:24.740
20.

50
00:02:24.740 --> 00:02:25.677
14".

51
00:02:27.900 --> 00:02:30.550
And, now its not letting me add anymore characters.

52
00:02:30.550 --> 00:02:33.660
Because, this field is configured in a way,

53
00:02:33.660 --> 00:02:36.800
that it doesn't allow more than this number of characters.

54
00:02:36.800 --> 00:02:40.000
But, we can bypass this very easily by right-clicking,

55
00:02:40.000 --> 00:02:41.743
and going on inspect element.

56
00:02:42.890 --> 00:02:45.870
And, we're gonna modify the max length.

57
00:02:45.870 --> 00:02:48.993
To, instead of 50, I'm gonna set it to 500.

58
00:02:50.720 --> 00:02:51.553
And, that's it.

59
00:02:51.553 --> 00:02:52.700
Now, I can add more stuff.

60
00:02:52.700 --> 00:02:54.690
So, I'm gonna close that.

61
00:02:54.690 --> 00:02:57.703
And, I'm gonna set it to, "10.20.14.

62
00:02:59.100 --> 00:03:00.070
Two.

63
00:03:00.070 --> 00:03:01.140
O.

64
00:03:01.140 --> 00:03:01.973
seven",

65
00:03:01.973 --> 00:03:02.806
which is my current IP.

66
00:03:02.806 --> 00:03:05.943
Now, I can get my current IP by doing a config.

67
00:03:12.397 --> 00:03:13.950
"10.20.14.two.o.seven".

68
00:03:13.950 --> 00:03:14.783
Just to confirm.

69
00:03:15.910 --> 00:03:18.353
And, I'm gonna sign guestbook.

70
00:03:19.630 --> 00:03:21.590
And, that should make it work.

71
00:03:21.590 --> 00:03:24.623
Now, if I go to my target.

72
00:03:25.690 --> 00:03:26.670
Now, right now,

73
00:03:26.670 --> 00:03:29.660
you can see that I have my Linux computer right here,

74
00:03:29.660 --> 00:03:32.010
has been hooked as a target.

75
00:03:32.010 --> 00:03:34.840
Now, obviously this is not my target, this is just me.

76
00:03:34.840 --> 00:03:38.440
And, its, the hook has been executed on my browser.

77
00:03:38.440 --> 00:03:41.550
So, our target is actually this windows device, or,

78
00:03:41.550 --> 00:03:46.550
any person who is going to be visiting this XSS stored page.

79
00:03:46.690 --> 00:03:49.690
So, because this is a stored XSS, just like we explained,

80
00:03:49.690 --> 00:03:51.560
the code will be executed

81
00:03:51.560 --> 00:03:53.743
on any person who visits this page.

82
00:03:55.110 --> 00:03:58.840
Now, if we go back, we should see the windows device,

83
00:03:58.840 --> 00:04:00.600
right here, as you can see.

84
00:04:00.600 --> 00:04:02.950
And, its showing up in the online browsers.

85
00:04:02.950 --> 00:04:06.270
So, we basically have hooked this device.

86
00:04:06.270 --> 00:04:09.240
And, we can run a large number of functions

87
00:04:09.240 --> 00:04:10.993
that Beef allows us to do.

88
00:04:12.270 --> 00:04:14.720
So, I'm gonna click on my target.

89
00:04:14.720 --> 00:04:16.320
And, I'm gonna go under command.

90
00:04:18.560 --> 00:04:21.240
So, right now, I just want to run a specific command,

91
00:04:21.240 --> 00:04:22.830
which is just an alert command,

92
00:04:22.830 --> 00:04:24.210
like we were doing before.

93
00:04:24.210 --> 00:04:26.713
Just to confirm that everything is working.

94
00:04:28.520 --> 00:04:29.910
So, I'm gonna go on this one,

95
00:04:29.910 --> 00:04:32.060
which is "Create an Alert Dialog".

96
00:04:32.060 --> 00:04:34.080
And, you can set the text in here.

97
00:04:34.080 --> 00:04:35.850
So, you can put any text you want.

98
00:04:35.850 --> 00:04:38.730
I'm gonna leave it as, "Beef Alert Dialog".

99
00:04:38.730 --> 00:04:40.703
I'm just gonna click on execute.

100
00:04:44.100 --> 00:04:45.780
So, if we go on our target computer,

101
00:04:45.780 --> 00:04:48.033
we can see that the alert dialog is working.

102
00:04:49.655 --> 00:04:51.520
Now, I just did that to show you

103
00:04:51.520 --> 00:04:53.640
that everything is working perfectly.

104
00:04:53.640 --> 00:04:57.130
Now, anybody who browses our target website,

105
00:04:57.130 --> 00:04:59.780
the vulnerable website, will get hooked to Beef.

106
00:04:59.780 --> 00:05:02.620
And, you can run all the commands that we seen before.

107
00:05:02.620 --> 00:05:03.784
So, all the commands that we seen

108
00:05:03.784 --> 00:05:05.490
in the client site attacks.

109
00:05:05.490 --> 00:05:09.220
Like, getting full access using a fake notification bar,

110
00:05:09.220 --> 00:05:11.800
using the petty theft, getting the screenshot,

111
00:05:11.800 --> 00:05:13.700
injecting a key logger.

112
00:05:13.700 --> 00:05:17.600
You can do all of these attacks on any person who visits

113
00:05:17.600 --> 00:05:18.830
the vulnerable page.

114
00:05:18.830 --> 00:05:21.910
Because, we injected our hook into that browse.

115
00:05:21.910 --> 00:05:24.460
Into that page, not into the browser.

116
00:05:24.460 --> 00:05:27.670
And, its part of the page, so every time the page loads,

117
00:05:27.670 --> 00:05:30.853
by anyone, they will be get, they will be hooked to Beef.

