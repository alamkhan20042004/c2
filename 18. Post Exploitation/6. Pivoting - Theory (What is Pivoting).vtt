WEBVTT

00:01.470 --> 00:03.810
Instructor: In today's lecture and the next few lectures,

00:03.810 --> 00:06.270
we're going to talk about pivoting.

00:06.270 --> 00:08.610
We're going to assume that our target

00:08.610 --> 00:10.473
is this Metasploitable device.

00:11.430 --> 00:14.490
Now, each one of these circles, the big circles,

00:14.490 --> 00:16.920
we're going to assume is a network.

00:16.920 --> 00:18.330
And as you can see,

00:18.330 --> 00:22.560
the Metasploitable device is not visible by the hacker.

00:22.560 --> 00:25.410
So the hacker cannot see this device.

00:25.410 --> 00:28.350
This device is hidden either behind the network,

00:28.350 --> 00:29.970
or for some other reason,

00:29.970 --> 00:32.610
the hacker is not able to ping

00:32.610 --> 00:35.673
or access the IP address of this device.

00:36.540 --> 00:38.310
So we're assuming in our example

00:38.310 --> 00:42.333
that it exists in a different internal network.

00:43.470 --> 00:46.320
So we can see that this big network has four devices.

00:46.320 --> 00:48.210
It has the Metasploitable device,

00:48.210 --> 00:51.960
it has an iPhone, another device, and the Windows device,

00:51.960 --> 00:54.633
which we hacked, and we can see that it's in red.

00:55.650 --> 00:59.730
And the hacker exists in this smaller network,

00:59.730 --> 01:01.050
and there's only two devices.

01:01.050 --> 01:03.480
There is the hacker and the red device,

01:03.480 --> 01:06.240
the Windows 10 device which we hacked.

01:06.240 --> 01:08.642
So the target of pivoting

01:08.642 --> 01:10.650
is we use the device that we hacked,

01:10.650 --> 01:14.880
the common device in the middle, to compromise other devices

01:14.880 --> 01:17.700
that only this device has access to.

01:17.700 --> 01:21.240
So our target, the hacker cannot see the target,

01:21.240 --> 01:23.190
which is the Metasploit device.

01:23.190 --> 01:26.610
But the device that we just hacked, the Windows device,

01:26.610 --> 01:29.910
can see that device because they're in the same network.

01:29.910 --> 01:31.320
So in our next videos,

01:31.320 --> 01:34.813
we're going to try to hack into the Metasploitable device

01:34.813 --> 01:36.930
while the meta exploitable device

01:36.930 --> 01:39.570
is not gonna be visible to the hacker,

01:39.570 --> 01:41.970
which is the Kali device.

01:41.970 --> 01:44.160
The only way to access the Metasploitable

01:44.160 --> 01:46.050
is through the Windows device,

01:46.050 --> 01:48.360
which we are going to use as a pivot

01:48.360 --> 01:51.690
in order to hack this device right there.

01:51.690 --> 01:53.820
Now, to replicate this network layout,

01:53.820 --> 01:56.610
we'll need to modify the network settings

01:56.610 --> 01:59.550
of the virtual machines in our lab.

01:59.550 --> 02:02.100
So I have VMware running here already,

02:02.100 --> 02:03.990
and I'm gonna zoom in.

02:03.990 --> 02:04.860
And first of all,

02:04.860 --> 02:07.800
I just wanna show you the network settings for Kali.

02:07.800 --> 02:10.023
So I'm gonna click on Edit settings.

02:11.280 --> 02:13.320
And if we click on Network,

02:13.320 --> 02:16.470
you'll notice that it is connected to an NAT network.

02:16.470 --> 02:18.420
This is the option that we've been using

02:18.420 --> 02:19.410
throughout the course

02:19.410 --> 02:21.540
and I'm actually gonna keep it the same

02:21.540 --> 02:24.300
because Kali is the machine that we use

02:24.300 --> 02:26.310
to hack into other computers,

02:26.310 --> 02:28.440
it's gonna be connected to the NAT network,

02:28.440 --> 02:31.890
and we're gonna use it to gain our initial access

02:31.890 --> 02:33.930
to the Windows machine.

02:33.930 --> 02:36.873
So let's go ahead and have a look on the Windows machine.

02:38.640 --> 02:40.200
So I'm gonna click it here,

02:40.200 --> 02:42.333
and I'm gonna click on its settings,

02:43.380 --> 02:45.480
and we're gonna go to Network.

02:45.480 --> 02:46.920
And if we zoom in,

02:46.920 --> 02:49.740
you'll see that this is connected to a NAT network.

02:49.740 --> 02:51.870
We need this, because as I said,

02:51.870 --> 02:55.260
we're gonna use the Kali machine to hack into this machine

02:55.260 --> 02:57.690
to gain our initial access.

02:57.690 --> 03:00.270
But if we go back to the layout,

03:00.270 --> 03:02.250
you'll notice that the Windows machine

03:02.250 --> 03:06.150
is gonna be the machine that we're gonna use as a pivot

03:06.150 --> 03:08.160
to hack into the other network.

03:08.160 --> 03:10.890
So it's gonna be the link between the two networks,

03:10.890 --> 03:13.170
the network that Kali is connected to

03:13.170 --> 03:15.660
and an unreachable network to Kali

03:15.660 --> 03:18.930
that we actually want to hack through Kali.

03:18.930 --> 03:21.120
Therefore, because this is supposed to be a pivot,

03:21.120 --> 03:22.740
and as we can see in this layout,

03:22.740 --> 03:25.230
it needs to be connected to two networks.

03:25.230 --> 03:26.790
So right now it's already connected

03:26.790 --> 03:29.070
to the NAT network in here, as we can see,

03:29.070 --> 03:31.890
which is the same network that Kali is connected to,

03:31.890 --> 03:34.770
and we need this to gain our initial access.

03:34.770 --> 03:38.733
But we're also gonna click on the Add in here,

03:39.840 --> 03:42.420
and we're gonna add another network adapter

03:42.420 --> 03:45.930
for this computer so that it has two network adapters,

03:45.930 --> 03:48.690
so that we can connect it to two networks.

03:48.690 --> 03:52.140
And we're gonna set this network settings to Bridged

03:52.140 --> 03:53.193
instead of NAT.

03:54.240 --> 03:57.210
So now Windows has two network adapters.

03:57.210 --> 03:59.880
Adapter 1 is connected to a NAT network,

03:59.880 --> 04:03.060
which is the same network that Kali is connected to

04:03.060 --> 04:05.820
so that we can gain initial access to it.

04:05.820 --> 04:09.090
And then, it's also connected to another network

04:09.090 --> 04:10.440
that Kali cannot see.

04:10.440 --> 04:12.360
It's an unreachable network to Kali.

04:12.360 --> 04:14.310
And that's the goal of this scenario,

04:14.310 --> 04:15.810
it's the goal of this module,

04:15.810 --> 04:18.510
to try to reach this unreachable network.

04:18.510 --> 04:19.680
And this second network,

04:19.680 --> 04:21.753
we set it to use a bridged connection.

04:22.830 --> 04:24.270
So we're happy with this.

04:24.270 --> 04:26.400
We're gonna click on OK.

04:26.400 --> 04:29.730
And we're gonna go to the Metasploitable computer

04:29.730 --> 04:31.830
and we're actually gonna set this computer

04:31.830 --> 04:36.630
to also be connected to the same bridged network

04:36.630 --> 04:39.660
that the Windows machine is connected to.

04:39.660 --> 04:42.210
So this way, this Metasploitable machine

04:42.210 --> 04:44.940
is unreachable to Kali because it's connected

04:44.940 --> 04:48.000
to a completely different network than Kali.

04:48.000 --> 04:50.910
Therefore, Kali cannot directly communicate with it

04:50.910 --> 04:53.610
and cannot hack it even if it's vulnerable.

04:53.610 --> 04:54.870
Therefore, we're gonna have to hack

04:54.870 --> 04:56.310
into the Windows machine.

04:56.310 --> 04:58.230
Use the Windows machine as a pivot

04:58.230 --> 05:01.200
because it is the link between the two computers,

05:01.200 --> 05:02.850
between the two networks,

05:02.850 --> 05:05.790
to hack into this unreachable network

05:05.790 --> 05:08.370
or into this unreachable computer.

05:08.370 --> 05:11.550
So I'm gonna zoom out and I'm gonna click on OK.

05:11.550 --> 05:13.740
And we are done now.

05:13.740 --> 05:16.770
So let's go back to the network layout with labels now.

05:16.770 --> 05:17.970
And as you can see now,

05:17.970 --> 05:20.280
we have both Kali and Windows

05:20.280 --> 05:22.080
are connected to the NAT network,

05:22.080 --> 05:24.780
and therefore they can communicate with each other.

05:24.780 --> 05:27.090
Like I said, we're gonna gain our initial access

05:27.090 --> 05:28.830
through this Windows network.

05:28.830 --> 05:31.320
And then we're gonna set up pivoting rules

05:31.320 --> 05:33.330
so we can use the Windows machine

05:33.330 --> 05:37.440
to access the unreachable Metasploitable machine.

05:37.440 --> 05:40.170
On the other hand, we have the Metasploitable machine.

05:40.170 --> 05:42.210
It's network setting set to bridged,

05:42.210 --> 05:44.190
so it's unreachable to Kali,

05:44.190 --> 05:46.380
but it's reachable to the Windows machine

05:46.380 --> 05:48.180
because we configured the Windows machine

05:48.180 --> 05:49.620
to have two adapters,

05:49.620 --> 05:52.290
one of them connected to the same network as Kali

05:52.290 --> 05:53.123
and the other

05:53.123 --> 05:56.520
connected to the same network as Metasploitable.

05:56.520 --> 05:58.350
And therefore, if somebody wants to hack

05:58.350 --> 06:01.470
into Metasploitable, they'll have to hack into Kali

06:01.470 --> 06:05.610
and use it as a pivot to access this unreachable network,

06:05.610 --> 06:08.160
and that's what we're gonna do in the next lecture.
